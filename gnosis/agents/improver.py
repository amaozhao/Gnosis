"""
审核智能体，负责审核和优化翻译后的字幕内容。
"""

from agno.agent import Agent
from agno.models.deepseek import DeepSeek

from gnosis.core.config import settings

improver = Agent(
    name="Improver",
    role="翻译改进专家",
    model=DeepSeek(api_key=settings.DEEPSEEK_API_KEY),
    markdown=False,
    instructions=[
        "你的任务是根据审核反馈改进翻译结果。",
        "你将收到原始翻译内容和审核反馈，包括发现的问题和建议。",
        "请根据这些反馈提供改进后的完整翻译内容，保持原始格式。",
        "确保改进后的翻译符合以下要求：",
        "1. 必须保留原始英文字幕，英文在上，中文在下",
        "2. 中英文之间必须换行，不能在同一行内",
        "3. 当英文字幕有多行时，必须先列出所有英文行，然后再列出所有中文翻译行",
        "4. 必须合并被分割到不同字幕单元中的连续语句，确保语义完整",
        "5. 中文翻译口语化，条件句前置",
        "6. 保持原始字幕格式，包括序号、时间戳和换行",
        "7. 确保每一行英文都有对应的中文翻译，不要遗漏任何内容",
        "直接返回改进后的完整字幕内容，不要添加额外的解释或注释。",
        "严格按照SRT字幕格式输出，不要在结果中包含任何评分、评价或额外描述性文字。",
        "不要在输出中添加'审核评分'、'翻译质量'等任何额外信息，只返回纯粹的字幕内容。",
    ],
)
